<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- generated by to_html.pl from function.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Functions</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="Standard style for Kirikiri-related references" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="Top Page" />
</head>
<body>
<h1><a id="id200" name="id200">Functions</a>
</h1><div class="para"><div>
　TJS2 functions are almost synonymous with <a id="id201" name="id201" class="targanchor"><dfn>subroutines</dfn></a>. They are treated as functions even when they do not return a value.<br />
　Additionally, functions that are members of classes or objects are sometimes called "<a id="id202" name="id202" class="targanchor"><dfn>methods</dfn></a>".<br />
</div></div>
<h1><a id="id203" name="id203">How to write functions</a>
</h1><div class="para"><div>
　Functions can be written in the following format.<br />

<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;FunctionName&nbsp;(&nbsp;ArgumentList&nbsp;)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FunctionBody<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
　First, to define a function, you write <a id="id204" name="id204" class="targanchor"><dfn>function</dfn></a>. After that, write the name of the function. The function becomes usable with the name written here.<br />
　In the function body, you can describe statements or blocks that you want to execute within the function.<br />
<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test(a)&nbsp;{&nbsp;System.inform(a);&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(a,&nbsp;b,&nbsp;c,&nbsp;d)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test(a);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test(b);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test(c);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test(d);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;a+b-c*d;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
If you use the instanceof operator on a function with "Function", it returns true (in the above example, func instanceof "Function" is true).<br />
</div></div>
<h1><a id="id205" name="id205">Calling functions</a>
</h1><div class="para"><div>
　Function calls are written using the <a id="id206" name="id206" class="targanchor"><dfn>( )</dfn></a> operator as follows:<br />
<code class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;FunctionName( Arguments )<br />
</code>&nbsp;&nbsp;&nbsp;&nbsp;If there are no arguments, it becomes <code class="inlinecode">FunctionName( )</code>. For arguments, specify expressions, and if there are multiple, separate them with commas.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;func();<br />
&nbsp;&nbsp;&nbsp;&nbsp;func(1+2,&nbsp;1-2);<br />
&nbsp;&nbsp;&nbsp;&nbsp;func(func2());<br />
</code>
<br />

<br />
&nbsp;&nbsp;&nbsp;&nbsp;Also, if you leave an argument space empty without specifying an expression, it is considered as if void were specified for that part.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;func(,1);&nbsp;<span class="comment">//&nbsp;Treated&nbsp;as&nbsp;if&nbsp;void,&nbsp;1&nbsp;were&nbsp;specified</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;func(,);&nbsp;<span class="comment">//&nbsp;Treated&nbsp;as&nbsp;if&nbsp;void,&nbsp;void&nbsp;were&nbsp;specified</span><br />
</code>
<br />

</div></div>
<h1><a id="id207" name="id207">Argument List</a>
</h1><div class="para"><div>
　In the argument list, you write the names of the variables that will receive the passed arguments. Among the arguments passed during the function call, they are handed over to the variables in the order they were written from the front.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test(a,&nbsp;b,&nbsp;c)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;At&nbsp;this&nbsp;point,&nbsp;variables&nbsp;a,&nbsp;b,&nbsp;and&nbsp;c&nbsp;are&nbsp;available,&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;and&nbsp;the&nbsp;three&nbsp;arguments&nbsp;passed&nbsp;as&nbsp;arguments&nbsp;are&nbsp;assigned.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;If&nbsp;called&nbsp;as&nbsp;test(1,&nbsp;2,&nbsp;3),&nbsp;a&nbsp;will&nbsp;contain&nbsp;1,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;b&nbsp;will&nbsp;contain&nbsp;2,&nbsp;and&nbsp;c&nbsp;will&nbsp;contain&nbsp;3.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
　These arguments are local variables and will become inaccessible once execution leaves the function.<br />
<br />
　In TJS2, it is not an error if the number of arguments given during a function call is fewer or more than the number of arguments in the declaration (as an exception, functions that are not written in TJS2 (entities written in C++, etc.) may result in an error). If more arguments are given than declared, the excess is ignored; if fewer, void is passed to the missing variables.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test(a,&nbsp;b)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;If&nbsp;called&nbsp;as&nbsp;test(1),&nbsp;a&nbsp;will&nbsp;be&nbsp;1&nbsp;and&nbsp;b&nbsp;will&nbsp;be&nbsp;void.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;If&nbsp;called&nbsp;as&nbsp;test(1,2,3),&nbsp;a&nbsp;will&nbsp;be&nbsp;1&nbsp;and&nbsp;b&nbsp;will&nbsp;be&nbsp;2;&nbsp;3&nbsp;is&nbsp;ignored.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
　Individual arguments in the argument list can be assigned a default value (<a id="id208" name="id208" class="targanchor"><dfn>default argument</dfn></a>) following =. This means that the specified value will automatically be used when void is specified or when the number of given arguments is less than the number of arguments in the declaration.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test(a&nbsp;=&nbsp;-1,&nbsp;b&nbsp;=&nbsp;1)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;If...</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Called&nbsp;as&nbsp;test(),&nbsp;a=-1,&nbsp;b=1</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Called&nbsp;as&nbsp;test(5),&nbsp;a=5,&nbsp;b=1</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Called&nbsp;as&nbsp;test(void,void),&nbsp;a=-1,&nbsp;b=1</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Called&nbsp;as&nbsp;test(,4),&nbsp;a=-1,&nbsp;b=4</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
　For functions that do not need to receive arguments, the argument list can be omitted.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Function&nbsp;that&nbsp;receives&nbsp;no&nbsp;arguments</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

</div></div>
<h1><a id="id209" name="id209">Function Expressions</a>
</h1><div class="para"><div>
　By using the function keyword within an expression, you can create unnamed functions, function expressions (<a id="id210" name="id210" class="targanchor"><dfn>anonymous functions</dfn></a>).<br />
　In this case, the function name is omitted.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;func&nbsp;=&nbsp;function(i)&nbsp;{&nbsp;return&nbsp;i*5;&nbsp;};<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;func2&nbsp;=&nbsp;function&nbsp;{&nbsp;System.inform(&quot;hoge&quot;);&nbsp;};<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;func();&nbsp;<span class="comment">//&nbsp;Calling&nbsp;func</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;func2();&nbsp;<span class="comment">//&nbsp;Calling&nbsp;func2</span><br />
</code>
<br />

</div></div>
<h1><a id="id211" name="id211">Omitting Arguments</a>
</h1><div class="para"><div>
　When calling a function, if you write only <a id="id212" name="id212" class="targanchor"><dfn>...</dfn></a> as an argument, the arguments passed to the function where the call expression is written are passed directly to the called function. This ensures that the original content and the correct number of arguments are passed, even if the argument variables have been modified or if there were not enough arguments received.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test()<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test2(...);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;The&nbsp;arguments&nbsp;passed&nbsp;to&nbsp;test&nbsp;are&nbsp;passed&nbsp;to&nbsp;test2&nbsp;exactly&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;with&nbsp;the&nbsp;same&nbsp;content&nbsp;and&nbsp;count&nbsp;as&nbsp;they&nbsp;were&nbsp;when&nbsp;passed&nbsp;to&nbsp;test.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

</div></div>
<h1><a id="id213" name="id213">Converting Arguments to an Array</a>
</h1><div class="para"><div>
　Arguments can be received as an array. To receive them as an array, declare the function by adding '<a id="id214" name="id214" class="targanchor"><dfn>*</dfn></a>' to the argument name.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(args*)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;args&nbsp;becomes&nbsp;an&nbsp;array&nbsp;with&nbsp;the&nbsp;arguments&nbsp;passed&nbsp;to&nbsp;this&nbsp;function&nbsp;as&nbsp;elements</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;called&nbsp;as&nbsp;func(1,&nbsp;2,&nbsp;3,&nbsp;4),&nbsp;args&nbsp;will&nbsp;contain</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;4&nbsp;elements&nbsp;with&nbsp;the&nbsp;values&nbsp;1,&nbsp;2,&nbsp;3,&nbsp;4&nbsp;in&nbsp;that&nbsp;order.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
　You can also receive everything from the middle of the arguments to the end as an array. If the number of arguments is insufficient, the array will be empty.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(x,&nbsp;args*)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;called&nbsp;as&nbsp;func(1,&nbsp;2,&nbsp;3,&nbsp;4),&nbsp;x&nbsp;will&nbsp;contain&nbsp;1.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Also,&nbsp;args&nbsp;will&nbsp;contain&nbsp;3&nbsp;elements&nbsp;with&nbsp;the&nbsp;values&nbsp;2,&nbsp;3,&nbsp;4&nbsp;in&nbsp;that&nbsp;order.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;If&nbsp;called&nbsp;as&nbsp;func(1),&nbsp;since&nbsp;the&nbsp;number&nbsp;of&nbsp;arguments&nbsp;is&nbsp;not&nbsp;reached,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;args&nbsp;will&nbsp;be&nbsp;an&nbsp;array&nbsp;with&nbsp;no&nbsp;elements.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

　This is useful when you want to handle variable-length arguments.<br />
<br />
　It is also possible to not specify an argument name. In this case, it can be used as a nameless * during the expansion of an array into arguments described below.<br />
</div></div>
<h1><a id="id215" name="id215">Expanding an Array into Arguments</a>
</h1><div class="para"><div>
　You can expand an array and pass its elements as arguments to a function. In this case, similar to converting arguments to an array, you call the function by adding '<a id="id216" name="id216" class="targanchor"><dfn>*</dfn></a>' after the expression you want to expand. The expression you want to expand by specifying '*' must represent an array.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;args&nbsp;=&nbsp;[1,&nbsp;2,&nbsp;3,&nbsp;4];<br />
&nbsp;&nbsp;&nbsp;&nbsp;func(args*);<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Since&nbsp;args&nbsp;contains&nbsp;four&nbsp;elements&nbsp;1,&nbsp;2,&nbsp;3,&nbsp;4,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;it&nbsp;means&nbsp;the&nbsp;same&nbsp;as&nbsp;func(1,&nbsp;2,&nbsp;3,&nbsp;4);.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;func(0,&nbsp;args*,&nbsp;5);<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;It&nbsp;is&nbsp;also&nbsp;possible&nbsp;to&nbsp;insert&nbsp;it&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;arguments&nbsp;like&nbsp;this.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;In&nbsp;this&nbsp;case,&nbsp;it&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;func(0,&nbsp;1,&nbsp;2,&nbsp;3,&nbsp;4,&nbsp;5);.</span><br />
</code>
<br />

<br />
　By specifying just * as an argument without an expression, you can pass the arguments represented by the nameless '*' written at the time of the declaration of the function containing the call expression directly to the destination.
<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(func_array,&nbsp;*)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;For&nbsp;the&nbsp;functions&nbsp;specified&nbsp;in&nbsp;func_array,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;following&nbsp;the&nbsp;position&nbsp;of&nbsp;that&nbsp;function&nbsp;within&nbsp;func_array,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;pass&nbsp;the&nbsp;second&nbsp;and&nbsp;subsequent&nbsp;arguments&nbsp;passed&nbsp;to&nbsp;func&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;directly&nbsp;to&nbsp;the&nbsp;call.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;func_array.count;&nbsp;i++)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func_array[i](i,&nbsp;*);<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
　Function call processing with a nameless * can be processed more efficiently than using a named array.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(ar*)&nbsp;{&nbsp;func2(ar*);&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(*)&nbsp;{&nbsp;func2(*);&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;The&nbsp;two&nbsp;above&nbsp;have&nbsp;exactly&nbsp;the&nbsp;same&nbsp;meaning,&nbsp;but&nbsp;the&nbsp;example&nbsp;below&nbsp;is&nbsp;more&nbsp;efficient.</span><br />
</code>
<br />

<br />
　A nameless * has the same effect as "Omitting Arguments". The following two function declarations have the same meaning.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func()&nbsp;{&nbsp;func2(...);&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(*)&nbsp;{&nbsp;func2(*);&nbsp;}<br />
</code>
<br />

</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>