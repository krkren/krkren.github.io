```html
<html>
<head>
<meta HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=UTF-8">
<title>Kirikiri Z Functional Specification / Image Processing Functions</title>
<link rel="stylesheet" href="styles-site.css" type="text/css" />
</head>
<body>
<a name="top"></a>
<div id="top_link"><a href="./index.html">To Top</a></div>
<div id="container">
<div id="title-banner">
<h1>Image Processing Functions</h1>
</div>

<div class="content">
<p>Describes the image processing functions supported by Kirikiri Z.</p>
<h3>Table of Contents</h3>
<p><a href="#spec">Specifications</a><br />
<a href="#blend_mode">Blend Operations</a><br />
<!--
<a href="#affine">Affine Transformation</a><br />
<a href="#gamma">Gamma Correction</a><br />
<a href="#glayscale">Grayscale Conversion</a><br />
-->
</p>
<br />


<div class="title_bar"><a name="spec">Specifications</a></div>
<br />
<table frame="box" rules="all">
	<tbody>
		<tr>
			<td rowspan="5">Blend<br />Operations</td>
			<td>Opaque</td>
			<td>Multiply</td>
			<td>Photoshop Compatible<br />Linear Dodge (Additive)</td>
			<td>Photoshop Compatible<br />Hard Light</td>
			<td>Photoshop Compatible<br />Lighten</td>
		</tr>
		<tr>
			<td>Alpha Blend</td>
			<td>Dodge</td>
			<td>Photoshop Compatible<br />Linear Burn (Subtractive)</td>
			<td>Photoshop Compatible<br />Soft Light</td>
			<td>Photoshop Compatible<br />Darken</td>
		</tr>
		<tr>
			<td>Additive Alpha</td>
			<td>Lighten</td>
			<td>Photoshop Compatible<br />Multiply</td>
			<td>Photoshop Compatible<br />Color Dodge</td>
			<td>Photoshop Compatible<br />Difference</td>
		</tr>
		<tr>
			<td>Additive</td>
			<td>Darken</td>
			<td>Photoshop Compatible<br />Screen</td>
			<td>Photoshop V.5.x or lower Compatible<br />Color Dodge</td>
			<td>Photoshop V.5.x or lower Compatible<br />Difference</td>
		</tr>
		<tr>
			<td>Subtractive</td>
			<td>Screen Multiply</td>
			<td>Photoshop Compatible<br />Overlay</td>
			<td>Photoshop Compatible<br />Color Burn</td>
			<td>Photoshop Compatible<br />Exclusion</td>
		</tr>
	</tbody>
</table>

<br />
<br />


<div class="title_bar"><a name="blend_mode">Blend Operations</a></div>
<br />
<table frame="box" rules="all">
	<thead><tr><td>No.</td><td>Type</td><td>Formula</td><td>Description</td></tr></thead>
	<tbody>
		<tr>
			<td>1</td>
			<td>Opaque</td>
			<td>result = src</td>
			<td>Performs blending without referencing the alpha channel.</td>
		</tr>
		<tr>
			<td>2</td>
			<td>Alpha Blend</td>
			<td>result = blend(dest, src, α)</td>
			<td>Performs alpha blending.<br />
			The most basic type used for transparency.</td>
		</tr>
		<tr>
			<td>3</td>
			<td>Additive Alpha</td>
			<td>result = min(1.0, dest × ( 1.0 - α ) + src)</td>
			<td>Performs additive alpha blending.</td>
		</tr>
		<tr>
			<td>4</td>
			<td>Additive</td>
			<td>result = min(1.0, dest × ( 1.0 - α ) + src)</td>
			<td>Performs additive blending. Suitable for representing glows/light effects.<br />
			Equivalent to "Linear Dodge" in Photoshop, but alpha is ignored in this blend.<br />
			The neutral color (the color that causes no change when layered) is black.</td>
		</tr>
		<tr>
			<td>5</td>
			<td>Subtractive</td>
			<td>result = max(0.0, dest + src - 1.0)<br />
			* The only difference from result = dest - src is whether src is inverted or not.</td>
			<td>Performs subtractive blending. Alpha is ignored.<br />
			The neutral color is white.</td>
		</tr>
		<tr>
			<td>6</td>
			<td>Multiply</td>
			<td>result = dest × src</td>
			<td>Performs multiply blending.<br />
			Alpha is ignored.<br />
			The neutral color is white.</td>
		</tr>
		<tr>
			<td>7</td>
			<td>Dodge</td>
			<td>result = min(1.0, dest ÷ ( 1.0 - src ) )</td>
			<td>Performs dodge blending.<br />
			Suitable for representing things illuminated by light.<br />
			Alpha is ignored.<br />
			The neutral color is black.</td>
		</tr>
		<tr>
			<td>8</td>
			<td>Lighten</td>
			<td>result = max(dest, src)</td>
			<td>Performs "Lighten" blending.<br />
			Alpha is ignored.<br />
			The neutral color is black.</td>
		</tr>
		<tr>
			<td>9</td>
			<td>Darken</td>
			<td>result = min(dest, src)</td>
			<td>Performs "Darken" blending.<br />
			Alpha is ignored.<br />
			The neutral color is white.</td>
		</tr>
		<tr>
			<td>10</td>
			<td>Screen Multiply</td>
			<td>result = 1.0 - ( 1.0 - dest ) × ( 1.0 - src )</td>
			<td>Performs "Screen Multiply" blending.<br />
			Alpha is ignored.<br />
			The neutral color is black.</td>
		</tr>
		<tr>
			<td>11</td>
			<td>Photoshop Compatible<br />Linear Dodge<br />(Additive)</td>
			<td>result = blend(dest, min(1.0, dest + src), α)</td>
			<td>Performs Photoshop-compatible "Linear Dodge" blending (additive blending).<br />
			Unlike 4. Additive Blend, alpha is not ignored.<br />
			The neutral color is black.</td>
		</tr>
		<tr>
			<td>12</td>
			<td>Photoshop Compatible<br />Linear Burn<br />(Subtractive)</td>
			<td>result = blend(dest, max(0.0, dest + src - 1.0), α)</td>
			<td>Performs Photoshop-compatible "Linear Burn" blending (subtractive blending).<br />
			Unlike 5. Subtractive Blend, alpha is not ignored.<br />
			The neutral color is white.</td>
		</tr>
		<tr>
			<td>13</td>
			<td>Photoshop Compatible<br />Multiply</td>
			<td>result = blend(dest, dest × src, α)</td>
			<td>Performs Photoshop-compatible "Multiply" blending.<br />
			Unlike 6. Multiply Blend, alpha is not ignored.<br />
			The neutral color is white.</td>
		</tr>
		<tr>
			<td>14</td>
			<td>Photoshop Compatible<br />Screen</td>
			<td>result = blend(dest, 1.0 - (1.0 - dest) × (1.0 - src), α)</td>
			<td>Performs Photoshop-compatible "Screen" blending.<br />
			Unlike 10. Screen Multiply Blend, alpha is not ignored.<br />
			The neutral color is black.</td>
		</tr>
		<tr>
			<td>15</td>
			<td>Photoshop Compatible<br />Overlay</td>
			<td>result = blend(dest, overlay(dest, src), α)<br />
			Where overlay(a, b) =<br />
			a × b × 2.0 (when a < 0.5)<br />
			1.0 - (1.0 - a) × (1.0 - b) × 2.0 (otherwise)</td>
			<td>Performs Photoshop-compatible "Overlay" blending.<br />
			The neutral color is 50% gray.</td>
		</tr>
		<tr>
			<td>16</td>
			<td>Photoshop Compatible<br />Hard Light</td>
			<td>result = blend(dest, hardlight(dest, src), α)<br />
			Where hardlight(a, b) =<br />
			a × b × 2.0 (when b < 0.5)<br />
			1.0 - (1.0 - a) × (1.0 - b) × 2.0 (otherwise)</td>
			<td>Performs Photoshop-compatible "Hard Light" blending.<br />
			The neutral color is 50% gray.</td>
		</tr>
		<tr>
			<td>17</td>
			<td>Photoshop Compatible<br />Soft Light</td>
			<td>result = blend(dest, softlight(dest, src), α)<br />
			Where softlight(a, b) = <br />
			(Paste the formula written in Latex later)</td>
			<td>Performs Photoshop-compatible "Soft Light" blending.<br />
			The neutral color is 50% gray.</td>
		</tr>
		<tr>
			<td>18</td>
			<td>Photoshop Compatible<br />Color Dodge</td>
			<td>result = blend(dest, min(1.0, dest ÷ ( 1.0 - src ) ), α)</td>
			<td>Performs Photoshop-compatible "Color Dodge" blending.<br />
			Unlike ltDodge, alpha is not ignored.<br />
			The neutral color is black.</td>
		</tr>
		<tr>
			<td>19</td>
			<td>Photoshop Ver.5.x or lower Compatible<br />Color Dodge</td>
			<td>result = min(1.0, dest ÷ ( 1.0 - src × α) )</td>
			<td>Performs "Color Dodge" blending compatible with Photoshop version 5.x or lower.<br />
			The formula is slightly different from 18. Photoshop Compatible Color Dodge.<br />
			The neutral color is black.</td>
		</tr>
		<tr>
			<td>20</td>
			<td>Photoshop Compatible<br />Color Burn</td>
			<td>result = blend(dest, max(0.0, 1.0 - (1.0 - dest) ÷ src), α)</td>
			<td>Performs Photoshop-compatible "Color Burn" blending.<br />
			The neutral color is white.</td>
		</tr>
		<tr>
			<td>21</td>
			<td>Photoshop Compatible<br />Lighten</td>
			<td>result = blend(dest, max(dest, src), α)</td>
			<td>Performs Photoshop-compatible "Lighten" blending.<br />
			Unlike 8. Lighten Blend, alpha is not ignored.<br />
			The neutral color is black.</td>
		</tr>
		<tr>
			<td>22</td>
			<td>Photoshop Compatible<br />Darken</td>
			<td>result = blend(dest, min(dest, src), α)</td>
			<td>Performs Photoshop-compatible "Darken" blending.<br />
			Unlike 9. Darken Blend, alpha is not ignored.<br />
			The neutral color is white.</td>
		</tr>
		<tr>
			<td>23</td>
			<td>Photoshop Compatible<br />Difference</td>
			<td>result = blend(dest, abs(dest - src), α)</td>
			<td>Performs Photoshop-compatible "Difference" blending.<br />
			The neutral color is black.</td>
		</tr>
		<tr>
			<td>24</td>
			<td>Photoshop Ver.5.x or lower Compatible<br />Difference</td>
			<td>result = abs(dest - src × α)</td>
			<td>Performs "Difference" blending compatible with Photoshop version 5.x or lower.<br />
			The formula is slightly different from 23. Photoshop Compatible Difference.<br />
			The neutral color is black.</td>
		</tr>
		<tr>
			<td>25</td>
			<td>Photoshop Compatible<br />Exclusion</td>
			<td>result = blend(dest, dest + src - 2.0 × src × dest, α)</td>
			<td>Performs Photoshop-compatible "Exclusion" blending.<br />
			The neutral color is black.</td>
		</tr>
	</tbody>
</table>

<br />
<br />

</div>
</div>

</body>
</html>
```